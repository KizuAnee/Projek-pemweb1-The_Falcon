<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>kalkulator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
    <link rel="stylesheet" href="tes2.html">
    <style>
        .container {
            display: flex;
            flex-wrap: wrap;
            margin: 0 0;
        }

        .section {
            flex: 1 1 100%;
            display: flex;
            flex-wrap: wrap;
            padding: 20px;
            box-sizing: border-box;
        }

        .section img {
            flex: 1;
            max-width: 100%;
            height: auto;
            width: 500px;
            object-fit: cover;
        }

        .section .description {
            flex: 1 1 100%;
            position: relative;
            color: white;
        }

        .section .description p,
        .section .description ul,
        .section .description input {
            color: white;
        }

        .description ul {
            text-align: justify;
        }

        .description input {
            border-radius: 5px;
            border: none;
            padding: 5px;
            margin-top: 20px;
            margin-right: 20px;
            background-color: #5d5d5d;
            color: white;
            width: 90px;
        }

        body {
            background-color: black;
            color: white;
            box-sizing: border-box;
        }

        @media (min-width: 768px) {
            .section {
                flex-direction: column;
                align-items: center;
            }

            .section img,
            .section .description {
                width: 700px;
            }

            .section img {
                max-width: 100%;
                max-height: 500px;
            }

            .section .description {
                flex: 1 1 100%;
                position: relative;
                top: 150px;
                left: 40px;
                color: white;
            }

        }

        .garis-perhatian {
            background-color: white;
            height: 5px;
            opacity: 100%;
            margin: 20px 0;
        }

        .perhatian {
            text-align: center;
            position: relative;
            bottom: 20px;
        }

        .kalkulator {
            display: grid;
            color: white;
            background-color: #232222;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto auto;
            height: auto;
            gap: 20px;
            padding: 20px;
        }

        .kolom-kiri {
            grid-row: 1 / 3;
            background-color: #535353;
            box-sizing: border-box;
            border-radius: 50px;
            padding: 20px;
        }

        .kolom-kiri h1 {
            margin: 15px 20px 10px 20px;
            line-height: 60px;
            text-align: justify;
            height: auto;
        }

        .kolom-kiri .garis-kalkulator-kiri {
            background-color: white;
            opacity: 100%;
            height: 5px;
            margin: 10px 0px;
        }

        .kolom-kiri h3 {
            color: #FF9900;
        }

        .jumlahan {
            font-size: 30px;
        }

        .total {
            margin: 20px 20px;
            position: relative;
            bottom: 20px;
            font-family: Verdana;
        }

        .kolom-kanan-atas {
            grid-column: 2;
            grid-row: 1;
            background-color: #535353;
            padding: 20px;
            height: auto;
            box-sizing: border-box;
            border-radius: 25px;
        }

        .kolom-kanan-atas h2 {
            color: #FF9900;
        }

        .protein {
            font-family: Verdana;
        }

        .hasil2 {
            text-align: center;
            font-size: 30px;
            font-family: Verdana;
        }

        .kolom-kanan-bawah {
            grid-column: 2;
            grid-row: 2;
            background-color: #535353;
            height: auto;
            box-sizing: border-box;
            border-radius: 25px;
            padding: 20px;
        }

        .today {
            margin: 10px 20px;
            font-family: Verdana;
            font-weight: bold;
        }

        .garis-kalkulator-kanan {
            background-color: white;
            height: 5px;
            opacity: 100%;
        }

        .max {
            color: #FF9900;
            margin: 15px 20px 10px 20px;
            position: relative;
            top: 1px;
            font-family: Verdana;
        }

        #demo3 {
            text-align: center;
            font-size: 30px;
            font-family: Verdana;
        }

        .hasil-max {
            text-align: center;
            font-size: 30px;
            font-family: Verdana;
        }

        footer {
            color: #232222;
            background-color: gray;
            position: relative;
            left: 0;
            bottom: 0;
            width: 100%;
        }

        .text-sm {
            font-family: 'Segoe UI';
            font-size: 24px;
            font-weight: 300;
        }

        .btn {
            border: none;
            border-radius: 25px;
            background-color: #FFBE5C;
        }

        #demo {
            display: flex;
            flex-direction: row;
            justify-content: left;
            align-items: baseline;
            flex-wrap: wrap;
        }

        #demo span {
            font-size: 24px;
            font-weight: bold;
            margin: 0 10px;
            font-family: Verdana;
        }

        #demo1 {
            text-align: center;
            font-size: 50px;
            font-weight: bold;
            font-family: Verdana;
        }

        #demo2 {
            position: relative;
            bottom: 20px;
            text-align: center;
            font-size: 50px;
            font-weight: bold;
            font-family: Verdana;
        }

        #demo3 {
            text-align: center;
            font-size: 30px;
            font-weight: bold;
            font-family: Verdana;
        }

        #demo4 {
            text-align: center;
            font-size: 30px;
            font-weight: bold;
            font-family: Verdana;
        }

        #demo5 {
            margin-left: 20px;
            font-size: 24px;
            font-family: Verdana;
            font-weight: bold;
            color: white;
            background-color: #535353;
            border-radius: 10px;
            border: none;
            padding: 10px 20px;
        }

        #demo5:hover {
            background-color: #232222;
        }

        #demo6 {
            margin: 0px 20px;
            font-size: 24px;
            font-family: Verdana;
            font-weight: bold;
            color: white;
            background-color: #535353;
            border-radius: 10px;
            border: none;
            padding: 10px 20px;
        }

        #demo6:hover {
            background-color: #232222;
        }

        /* Media Queries for Responsive Design */
        @media (max-width: 768px) {
            .kalkulator {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
                gap: 20px;
                padding: 20px;
            }

            .kolom-kiri {
                grid-row: auto;
            }

            .kolom-kanan-atas,
            .kolom-kanan-bawah {
                grid-column: auto;
                grid-row: auto;
            }

            .jumlahan {
                font-size: 24px;
            }

            .total {
                margin: 20px 10px;
            }

            #demo5,
            #demo6 {
                margin: 10px;
                font-size: 20px;
                padding: 10px 15px;
            }

            #demo1,
            #demo2,
            #demo3,
            #demo4 {
                font-size: 24px;
            }
        }
    </style>
</head>

<body>
<<<<<<< HEAD
    <nav class="navbar navbar-expand-lg bg-dark">
        <div class="container-fluid p-2">
            <a class="navbar-brand text-light ms-5" href="landing_page.html">My Fitness</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon bg-light"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarContent">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item mx-5">
                        <a class="nav-link active text-light fw-bold" aria-current="page" href="home.html">Progresku</a>
                    </li>
                    <li class="nav-item mx-5">
                        <a class="nav-link active text-light fw-bold" aria-current="page"
                            href="tentang.html">Tentang</a>
                    </li>
                    <li class="nav-item mx-5">
                        <a class="nav-link active text-light fw-bold" aria-current="page"
                            href="tentang.html">Bantuan</a>
                    </li>
                </ul>
                <div class="d-flex ms-5">
                    <a href="#" class="btn btn-light px-4 fw-bold">SIGN UP</a>
=======
    <div id="navbar" class="logged-in-header">
        <nav class="navbar navbar-expand-lg bg-black">
            <div class="container-fluid p-2">
                <a class="navbar-brand text-light ms-5" href="landing_page.html">My Fitness</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                    aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon bg-light"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarContent">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item mx-5">
                            <a class="nav-link active text-light fw-bold" aria-current="page" href="home.html">Progresku</a>
                        </li>
                        <li class="nav-item mx-5">
                            <a class="nav-link active text-light fw-bold" aria-current="page"
                                href="tentang.html">Tentang</a>
                        </li>
                        <li class="nav-item mx-5">
                            <a class="nav-link active text-light fw-bold" aria-current="page" href="#">Bantuan</a>
                        </li>
                    </ul>
                    <div class="d-flex ms-5">
                        <box-icon name='user-circle' type='solid' color='#ffffff'
                            style="width: 65px; height: 36px;"></box-icon>
                    </div>
>>>>>>> b16f31418fd46050448f85a95a88888ba630aa25
                </div>
            </div>
    </nav>
    </div>
    <div>
        <div class="kalkulator">
            <div class="kolom-kiri">
                <h1 id="demo"></h1><br>
                <input id="demo6" type="button" value="<" onclick="undo()">
                <input id="demo5" type="button" value=">" onclick="resetValues()">
                <hr class="garis-kalkulator-kiri">
                <h3 class="total"><b>TOTAL</b></h3>
                <h1 id="demo1">0 Kcal</h1>
            </div>
            <div class="kolom-kanan-atas">
                <h2 class="protein"><b>PROTEIN</b></h2><br>
                <h1 id="demo2"><b>0 gram</b></h1>
            </div>
            <div class="kolom-kanan-bawah">
                <h2 class="today">TODAY</h2>
                <h1 id="demo3"><b>0 Kcal</b></h1>
                <hr class="garis-kalkulator-kanan">
                <h2 class="max"><b>MAX</b></h2>
                <h1 id="demo4"><b>0 Kcal</b></h1>
            </div>
        </div>

    </div>
    <div class="perhatian">
        <hr class="garis-perhatian">
        <p><b>Perhatian!!!</b> Berikut ini hanyalah Mencantumkan makanan umum beserta kandungan proteinnya.
            Jika Anda mengonsumsi makanan di luar makanan tersebut, silakan cek kandungan gizinya di situs web terkait.

            Untuk informasi lebih lanjut tentang kandungan gizi makanan lain,
            Anda dapat mengunjungi situs-situs seperti USDA FoodData Central atau FatSecret.</p>
        <hr class="garis-perhatian">
    </div>
    <div class="container">
        <div class="section">
            <img src="Gambar_Web_Kalkulator/tahu.png" alt="Tahu">
            <div class="description">
                <p class="keterangantahu">Tahu mengandung 8 gram protein per 100 gram (3-4 potong) <br>
                    dan memiliki kalori yang berbeda
                    tergantung metode cara <br> memasaknya.</p>
                <ul class="titik1" type="disc">
                    <li>Tahu rebus mengandung 80 kalori per 100gr</li>
                    <li>Tahu goreng mengandung 200 kalori per 100gr</li>
                    <li>Tahu bakar mengandung 105 kalori per 100gr</li>
                </ul>
                <input class="tombol1" type="submit" value="Rebus" onclick="myFunction('tahurebus')">
                <input class="tombol1" type="submit" value="Goreng" onclick="myFunction('tahugoreng')">
                <input class="tombol1" type="submit" value="Bakar" onclick="myFunction('tahubakar')">
            </div>
        </div>

        <div class="section">
            <img src="Gambar_Web_Kalkulator/tempe.png" alt="Tempe">
            <div class="description">
                <p class="keterangantempe">Tempe mengandung 18 gram protein per 100 gram (2 potong) <br>
                    dan memiliki kalori yang berbeda
                    tergantung metode cara <br> memasaknya.</p>
                <ul class="titik2" type="disc">
                    <li>Tempe rebus mengandung 140 kalori per 100gr</li>
                    <li>Tempe goreng mengandung 250 kalori per 100gr</li>
                    <li>Tempe bakar mengandung 170 kalori per 100gr</li>
                </ul>
                <input class="tombol2" type="submit" value="Rebus" onclick="myFunction('temperebus')">
                <input class="tombol2" type="submit" value="Goreng" onclick="myFunction('tempegoreng')">
                <input class="tombol2" type="submit" value="Bakar" onclick="myFunction('tempebakar')">
            </div>
        </div>

        <div class="section">
            <img src="Gambar_Web_Kalkulator/Ayam.png" alt="Ayam">
            <div class="description">
                <p class="keteranganayam">Ayam mengandung 31 gram protein per 100 gram (4-5 potong) <br>
                    dan memiliki kalori yang berbeda
                    tergantung metode cara <br> memasaknya.</p>
                <ul class="titik3" type="disc">
                    <li>Ayam rebus mengandung 165 kalori per 100gr</li>
                    <li>Ayam goreng mengandung 260 kalori per 100gr</li>
                    <li>Ayam bakar mengandung 190 kalori per 100gr</li>
                </ul>
                <input class="tombol3" type="submit" value="Rebus" onclick="myFunction('ayamrebus')">
                <input class="tombol3" type="submit" value="Goreng" onclick="myFunction('ayamgoreng')">
                <input class="tombol3" type="submit" value="Bakar" onclick="myFunction('ayambakar')">
            </div>
        </div>

        <div class="section">
            <img src="Gambar_Web_Kalkulator/daging.png" alt="Daging">
            <div class="description">
                <p class="keterangandaging">Daging mengandung 26 gram protein per 100 gram (3-4 potong) <br>
                    dan memiliki kalori yang berbeda
                    tergantung metode cara <br> memasaknya.</p>
                <ul class="titik4" type="disc">
                    <li>Daging rebus mengandung 250 kalori per 100gr</li>
                    <li>Daging goreng mengandung 350 kalori per 100gr</li>
                    <li>Daging bakar mengandung 275 kalori per 100gr</li>
                </ul>
                <input class="tombol4" type="submit" value="Rebus" onclick="myFunction('dagingrebus')">
                <input class="tombol4" type="submit" value="Goreng" onclick="myFunction('daginggoreng')">
                <input class="tombol4" type="submit" value="Bakar" onclick="myFunction('dagingbakar')">
            </div>
        </div>

        <div class="section">
            <img src="Gambar_Web_Kalkulator/telur.png" alt="Telur">
            <div class="description">
                <p class="keterangantelur">Telur mengandung 13 gram protein per 100 gram (2 potong) <br>
                    dan memiliki kalori yang berbeda
                    tergantung metode cara <br> memasaknya.</p>
                <ul class="titik5" type="disc">
                    <li>Telur rebus mengandung 155 kalori per 100gr</li>
                    <li>Telur goreng mengandung 201 kalori per 100gr</li>
                </ul>
                <input class="tombol5" type="submit" value="Rebus" onclick="myFunction('telurrebus')">
                <input class="tombol5" type="submit" value="Goreng" onclick="myFunction('telurgoreng')">
            </div>
        </div>
    </div>

    <footer class="text-center py-2" style="background-color: #D9D9D9;">
        <div class="text-sm"><span class="fw-bold">My Fitness </span>| by The Falcon Team</div>
        <div class="mt-2 justify-content-center gap-2">
            <a href="https://www.instagram.com/educom23.ulm/" class="text-decoration-none text-white">
                <box-icon name='instagram-alt' type='logo'></box-icon>
            </a>
            <a href="https://discord.gg/YrKarhSV" class="text-decoration-none text-white">
                <box-icon name='discord-alt' type='logo'></box-icon>
            </a>
            <a href="https://github.com/KizuAnee/Projek-pemweb1-The_Falcon.git" class="text-decoration-none text-white">
                <box-icon name='github' type='logo'></box-icon>
            </a>
        </div>
    </footer>
</body>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCw0JQnVmwhXC_HrPk1lXja3iNs5tDA1Mk",
        authDomain: "projek-pemweb-538e2.firebaseapp.com",
        databaseURL: "https://projek-pemweb-538e2-default-rtdb.firebaseio.com",
        projectId: "projek-pemweb-538e2",
        storageBucket: "projek-pemweb-538e2.appspot.com",
        messagingSenderId: "938803551824",
        appId: "1:938803551824:web:43b89766ae169579527b55",
        measurementId: "G-Z4P78BMM2X"
    };

    const app = initializeApp(firebaseConfig);

    const database = getDatabase(app);

    const dataRef = ref(database, 'users/defaultUser/data');

    // fungsi menghitung bmr
    function calculateBMR(age, gender, height, weight) {
        if (gender.toLowerCase() === 'male') {
            return 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
        } else {
            return 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
        }
    }

    // fungsi menghitung tdee
    function calculateTDEE(bmr, activityLevel = 1.2) {
        return bmr * activityLevel;
    }

    // Dapatkan data
    onValue(dataRef, (snapshot) => {
        const data = snapshot.val();
        const dataDisplay = document.getElementById('demo4');
        dataDisplay.innerHTML = '';

        // menampilkan data
        if (data) {
            const age = parseInt(data.age);
            const gender = data.gender;
            const height = parseInt(data.height);
            const weight = parseInt(data.weight);

            const bmr = calculateBMR(age, gender, height, weight);
            const tdee = calculateTDEE(bmr);
            const userDiv = document.createElement('div');
            userDiv.innerHTML = `
                <p> ${Math.round(tdee)} Kcal</p>
            `;
            dataDisplay.appendChild(userDiv);
        } else {
            dataDisplay.innerHTML = '<p>0 Kcal</p>';
        }

        checkCalorieLimit();
    });
</script>

<script>

    const DATE_KEY = 'currentDate';
    const STORAGE_KEY = 'totalSavedCalories';
    let hasil = 0;
    let proteintotal = 0;
    let totalSavedCalories = 0;
    let history = [];

    // bagian kalori makanan dan penjumlahannya
    function myFunction(type) {
        let kalori = 0;
        let protein = 0;
        // Bagian tahu
        const tahurebus = 80;
        const tahugoreng = 200;
        const tahubakar = 105;
        const proteintahu = 8;

        // Bagian tempe
        const temperebus = 140;
        const tempegoreng = 250;
        const tempebakar = 170;
        const proteintempe = 18;

        // Bagian ayam
        const ayamrebus = 165;
        const ayamgoreng = 260;
        const ayambakar = 190;
        const proteinayam = 31;

        // Bagian daging
        const dagingrebus = 250;
        const daginggoreng = 350;
        const dagingbakar = 275;
        const proteindaging = 26;


        // Bagian telur
        const telurrebus = 155;
        const telurgoreng = 201;
        const proteintelur = 13;


        // bagian tahu
        if (type === 'tahurebus') {
            kalori = tahurebus;
            protein = proteintahu;

        }

        else if (type === 'tahugoreng') {
            kalori = tahugoreng;
            protein = proteintahu;

        }

        else if (type === 'tahubakar') {
            kalori = tahubakar;
            protein = proteintahu;

        }


        // bagian tempe
        if (type === 'temperebus') {
            kalori = temperebus;
            protein = proteintempe;

        }

        else if (type === 'tempegoreng') {
            kalori = tempegoreng;
            protein = proteintempe;

        }

        else if (type === 'tempebakar') {
            kalori = tempebakar;
            protein = proteintempe;

        }


        // bagian ayam
        if (type === 'ayamrebus') {
            kalori = ayamrebus;
            protein = proteinayam;

        }

        else if (type === 'ayamgoreng') {
            kalori = ayamgoreng;
            protein = proteinayam;

        }

        else if (type === 'ayambakar') {
            kalori = ayambakar;
            protein = proteinayam;

        }


        // bagian daging
        if (type === 'dagingrebus') {
            kalori = dagingrebus;
            protein = proteindaging;

        }

        else if (type === 'daginggoreng') {
            kalori = daginggoreng;
            protein = proteindaging;

        }

        else if (type === 'dagingbakar') {
            kalori = dagingbakar;
            protein = proteindaging;

        }


        // bagian telur 
        else if (type === 'telurrebus') {
            kalori = telurrebus;
            protein = proteintelur;
        }

        else if (type === 'telurgoreng') {
            kalori = telurgoreng;
            protein = proteintelur;
        }

        history.push({ type, kalori, protein });

        const numberContainer = document.getElementById("demo");

        const newSpan = document.createElement('span');
        newSpan.textContent = kalori;
        numberContainer.appendChild(newSpan);

        const plusSpan = document.createElement('span');
        plusSpan.textContent = '+';
        numberContainer.appendChild(plusSpan);

        hasil += kalori;
        proteintotal += protein;

        document.getElementById("demo1").textContent = hasil + " Kcal";
        document.getElementById("demo2").textContent = proteintotal + " gram";

        checkCalorieLimit();
    }

    // mengundo atau menghapus jika salah masukkan
    function undo() {
        if (history.length === 0) return;

        const lastEntry = history.pop();

        hasil -= lastEntry.kalori;
        proteintotal -= lastEntry.protein;

        const numberContainer = document.getElementById("demo");
        numberContainer.removeChild(numberContainer.lastChild);
        numberContainer.removeChild(numberContainer.lastChild);

        document.getElementById("demo1").textContent = hasil + " Kcal";
        document.getElementById("demo2").textContent = proteintotal + " gram";

        checkCalorieLimit();
    }

    // mereset bagian perhitungan
    function resetValues() {
        totalSavedCalories += hasil;
        hasil = 0;
        proteintotal = 0;
        let history = [];

        document.getElementById("demo1").innerHTML = hasil + " Kcal";
        document.getElementById("demo2").innerHTML = proteintotal + " gram";
        document.getElementById("demo3").innerHTML = totalSavedCalories + " Kcal";

        const numberContainer = document.getElementById("demo");
        while (numberContainer.firstChild) {
            numberContainer.removeChild(numberContainer.firstChild);
        }

        checkCalorieLimit();
        saveData();
    }

    // mengembalikan ke awal ketika ganti tanggal
    function getTodayDateString() {
        const today = new Date();
        return today.toISOString().split('T')[0];
    }

    // memeriksa tanggal sesuai dengan hari ini
    function loadData() {
        const savedDate = localStorage.getItem(DATE_KEY);
        const todayDate = getTodayDateString();

        if (savedDate !== todayDate) {
            localStorage.removeItem(STORAGE_KEY);
            localStorage.setItem(DATE_KEY, todayDate);
        }

        const data = localStorage.getItem(STORAGE_KEY);
        if (data) {
            totalSavedCalories = parseInt(data, 10);
            document.getElementById("demo3").textContent = totalSavedCalories + " Kcal";
        } else {
            document.getElementById("demo3").textContent = "0 Kcal";
        }

        checkCalorieLimit();
    }

    // menyimpan data di local storage
    function saveData() {
        localStorage.setItem(STORAGE_KEY, totalSavedCalories);
    }

    // memeriksa demo3 lebih dari demo4 dan mengubah warna dan juga memberi peringatan
    function checkCalorieLimit() {
        const demo3 = document.getElementById("demo3");
        const demo4 = document.getElementById("demo4").querySelector('p');

        if (demo3 && demo4) {
            const demo3Value = parseInt(demo3.textContent);
            const demo4Value = parseInt(demo4.textContent);

            if (demo3Value > demo4Value) {
                demo3.style.color = 'red';
                alert("Anda melebihi batas harian");
            } else {
                demo3.style.color = 'white';
            }
        }
    }

    loadData();
</script>

</html>